# Snowy

This is a tiny module for manipulating and generating images, written purely in Python 3 and
accelerated with [numba](https://numba.pydata.org/). It has a small, flat API with some interesting
features, like the ability to specify boundary behavior during filtering.

With snowy, all images are three-dimensional numpy arrays. For example, RGB images have shape
`[height,width,3]` and grayscale images have shape `[height,width,1]`. Snowy provides some
utility functions that make it easy to work with other modules (see [interop](#interop)).

## Installing

To install and update snowy, do this:

`pip3 install -U snowy`

## Examples

Not interested in example code? Skip to the [quick reference](#quick_reference).

### Resize and blur

This snippet does a [resize](#resize), then a [blur](#blur), then horizontally concatenates the two
images.

```python
import snowy

source = snowy.open('poodle.png')
source = snowy.resize(source, height=200)
blurry = snowy.blur(source, radius=4.0)
snowy.save(snowy.hstack([source, blurry]), 'diptych.png')
```

<img src="diptych.png" height="150px">

The next snippet first magnifies an image using a nearest-neighbor filter, then using the default
Mitchell filter.

```python
parrot = snowy.load('parrot.png')
height, width = parrot.shape[:2]
nearest = snowy.resize(parrot, width * 6, filter=snowy.NEAREST) 
mitchell = snowy.resize(parrot, width * 6)
snowy.show(snowy.hstack([nearest, mitchell]))
```

<img src="diptych-parrot.png" height="128px">

### Rotate and flip

TBD

<img src="gibbons.jpg" height="128px">

### Crop

This loads an OpenEXR image, then crops out the top half by slicing the numpy array.

```python
sunset = snowy.load('sunset.exr')
cropped_sunset = sunset[:100,:,:]
snowy.show(cropped_sunset / 50.0) # darken the image
```

<img src="cropped-sunset.png" height="100px">

### Gradient noise

Snowy's [generate_noise](#generate_noise) function generates a single-channel image whose values are
in [-1,&nbsp;+1].

```python
n = snowy.generate_noise(100, 100, frequency=4, seed=42, wrapx=True)
n = np.hstack([n, n])
snowy.show(0.5 + 0.5 * n)
```

<img src="noise.png" height="128px">

### Distance fields

This uses [generate_sdf](#generate_sdf) to create a signed distance field from a monochrome
picture of two circles enclosed by a square. Note the usage of [unitize](#unitize) to adjust the
values into the `[0,1]` range.

```python
circles = snowy.load('circles.png')
sdf = snowy.unitize(snowy.generate_sdf(circles != 0.0))
snowy.show(snowy.hstack([circles, sdf]))
```

<img src="sdf.png" height="128px">

### Image manipulation

TBD

<img src="snowflake.png" height="128px">

### Image generation

TBD

<img src="gradient.png" width="150px">

<img src="island.png" height="150px">

## Interop

Remember, with snowy, images are *always* three-dimensional numpy arrays, and color channels live
in the trailing dimension. If you're working with another module that does not follow this
convention, consider using one of the following interop functions.

- To add or remove the trailing 1 from the shape of grayscale images, use [reshape](#reshape) and
[unshape](#unshape).
- To swap color channels in or out of the leading dimension, use [to_planar](#to_planar) and
[from_planar](#from_planar).

## Quick Reference

<table>
$quickref$
</table>

## Reference

This section is autogenerated and includes the source code of each entry point. This allows
you to clearly see the default parameters and expectations of each function.
